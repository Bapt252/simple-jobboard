<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Télécharger votre CV - Nexten</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-briefcase"></i> Nexten</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="post-job.html">Publier une offre</a></li>
                    <li><a href="candidate-upload.html" class="active">Espace candidat</a></li>
                    <li><a href="recruiter-dashboard.html">Espace recruteur</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section style="padding: 4rem 0; background-color: var(--gray);">
        <div class="container">
            <h2 style="font-size: 2rem; font-weight: 700; color: var(--dark); margin-bottom: 1rem; position: relative; display: inline-block;">
                Comment souhaitez-vous procéder ?
                <span style="content: ''; position: absolute; left: 0; bottom: -10px; width: 40%; height: 3px; background: var(--primary); border-radius: 10px; display: block;"></span>
            </h2>
            <p style="color: var(--text); font-size: 1.1rem; margin-bottom: 2.5rem;">Vous pouvez télécharger votre CV maintenant ou commencer directement par le questionnaire de préférences.</p>
            
            <div class="form-card">
                <div class="progress-steps">
                    <div class="step active">
                        <div class="step-circle">1</div>
                        <div class="step-text">Upload CV</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">2</div>
                        <div class="step-text">Questionnaire</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">3</div>
                        <div class="step-text">Matching</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="card fade-in" id="uploadNowOption" style="height: 100%; display: flex; flex-direction: column;">
                        <div style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <h3 class="card-title">Télécharger mon CV maintenant</h3>
                        <p class="card-text">Notre IA analysera votre CV pour extraire automatiquement vos compétences et expériences.</p>
                        <button class="btn btn-primary" id="uploadNowBtn" style="margin-top: auto;">
                            Télécharger mon CV
                        </button>
                    </div>
                    
                    <div class="card fade-in" id="uploadLaterOption" style="height: 100%; display: flex; flex-direction: column;">
                        <div style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <h3 class="card-title">Commencer par le questionnaire</h3>
                        <p class="card-text">Vous pourrez télécharger votre CV plus tard. Le questionnaire nous aide déjà à cibler vos préférences.</p>
                        <a href="candidate-questionnaire.html" class="btn btn-primary" style="margin-top: auto;">
                            Aller au questionnaire
                        </a>
                    </div>
                </div>
                
                <!-- Contenu pour l'option Télécharger maintenant -->
                <div style="display: none;" id="uploadContent">
                    <div class="file-upload" id="uploadArea">
                        <label class="file-upload-label">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 3.5rem; color: var(--primary); margin-bottom: 1.5rem;"></i>
                            <h3 style="font-size: 1.4rem; font-weight: 600; color: var(--dark); margin-bottom: 1rem;">Glissez votre CV ici</h3>
                            <p style="color: var(--text); margin-bottom: 0.5rem; font-size: 1.1rem;">ou <span style="color: var(--primary); text-decoration: underline; font-weight: 500; cursor: pointer;">cliquez pour parcourir</span></p>
                            <span class="file-upload-text">Formats acceptés : PDF, DOCX, DOC</span>
                        </label>
                        <input type="file" id="fileInput" class="file-upload-input" accept=".pdf,.docx,.doc">
                    </div>
                    
                    <a href="candidate-questionnaire.html" class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem; margin-bottom: 1.5rem;">
                        <i class="fas fa-arrow-right"></i> Faire plus tard et passer au questionnaire
                    </a>
                    
                    <div style="display: none; background-color: var(--light); padding: 1.2rem; border-radius: var(--radius); margin-top: 1rem; border-left: 3px solid var(--primary);" id="fileInfo">
                        <div style="font-weight: 600; color: var(--dark); display: flex; align-items: center;">
                            <i class="fas fa-file-alt" style="color: var(--primary); margin-right: 0.7rem;"></i> 
                            <span id="fileName">CV_John_Doe.pdf</span>
                        </div>
                        <div style="color: var(--text); font-size: 0.9rem; margin-top: 0.3rem; margin-left: 1.8rem;" id="fileSize">720 KB</div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; display: none;" id="progressContainer">
                        <div style="height: 10px; background-color: var(--gray); border-radius: 20px; overflow: hidden; margin-bottom: 0.7rem; position: relative;">
                            <div style="height: 100%; background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%); width: 0%; transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 20px;" id="progressFill"></div>
                        </div>
                        <div style="font-size: 0.95rem; color: var(--text); text-align: right; font-weight: 500;" id="progressText">0%</div>
                    </div>
                    
                    <div style="display: none; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--gray);" id="parsingContainer">
                        <h3 style="font-size: 1.4rem; font-weight: 600; color: var(--dark); margin-bottom: 0.8rem;">Informations extraites</h3>
                        <p style="color: var(--text); margin-bottom: 1.5rem;">Notre IA a analysé votre CV et identifié les informations suivantes :</p>
                        
                        <div class="card" style="background-color: var(--light); border-left: 3px solid var(--primary);">
                            <div style="margin-bottom: 2rem;" class="parsed-section">
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark); position: relative; display: inline-block; padding-bottom: 5px;">
                                    Informations personnelles
                                </h4>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Nom :</div>
                                    <div style="color: var(--dark);">John Doe</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Email :</div>
                                    <div style="color: var(--dark);">john.doe@example.com</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Téléphone :</div>
                                    <div style="color: var(--dark);">06 12 34 56 78</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0;">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Localisation :</div>
                                    <div style="color: var(--dark);">Paris, France</div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 2rem;" class="parsed-section">
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark); position: relative; display: inline-block; padding-bottom: 5px;">
                                    Compétences
                                </h4>
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                                    <span class="badge badge-secondary">JavaScript</span>
                                    <span class="badge badge-secondary">React</span>
                                    <span class="badge badge-secondary">Node.js</span>
                                    <span class="badge badge-secondary">HTML5</span>
                                    <span class="badge badge-secondary">CSS3</span>
                                    <span class="badge badge-secondary">Git</span>
                                    <span class="badge badge-secondary">TypeScript</span>
                                    <span class="badge badge-secondary">MongoDB</span>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 2rem;" class="parsed-section">
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark); position: relative; display: inline-block; padding-bottom: 5px;">
                                    Expérience
                                </h4>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Titre :</div>
                                    <div style="color: var(--dark);">Développeur Frontend</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Entreprise :</div>
                                    <div style="color: var(--dark);">TechSolutions</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0;">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Durée :</div>
                                    <div style="color: var(--dark);">Jan 2020 - Présent (3 ans)</div>
                                </div>
                            </div>
                            
                            <div class="parsed-section">
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark); position: relative; display: inline-block; padding-bottom: 5px;">
                                    Formation
                                </h4>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Diplôme :</div>
                                    <div style="color: var(--dark);">Master en Informatique</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0; border-bottom: 1px dashed var(--gray);">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">École :</div>
                                    <div style="color: var(--dark);">Université de Paris</div>
                                </div>
                                <div style="display: flex; margin-bottom: 0.8rem; padding: 0.5rem 0;">
                                    <div style="font-weight: 500; width: 140px; color: var(--primary-dark);">Année :</div>
                                    <div style="color: var(--dark);">2019</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; margin-top: 2.5rem; flex-wrap: wrap; gap: 1rem;">
                            <button class="btn btn-secondary" style="flex: 1; min-width: 180px;">
                                <i class="fas fa-edit" style="margin-right: 0.5rem;"></i> Modifier les informations
                            </button>
                            <button class="btn btn-primary" id="continueBtn" style="flex: 2; min-width: 220px;">
                                Compléter le questionnaire <i class="fas fa-arrow-right" style="margin-left: 0.5rem;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>© 2025 Nexten - Tous droits réservés</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const uploadNowOption = document.getElementById('uploadNowOption');
            const uploadLaterOption = document.getElementById('uploadLaterOption');
            const uploadContent = document.getElementById('uploadContent');
            const uploadNowBtn = document.getElementById('uploadNowBtn');
            
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const parsingContainer = document.getElementById('parsingContainer');
            const continueBtn = document.getElementById('continueBtn');
            const steps = document.querySelectorAll('.step');
            
            // Option selection
            uploadNowBtn.addEventListener('click', function() {
                uploadNowOption.style.borderColor = 'var(--primary)';
                uploadNowOption.style.backgroundColor = 'rgba(108, 99, 255, 0.05)';
                uploadLaterOption.style.borderColor = 'transparent';
                uploadLaterOption.style.backgroundColor = 'white';
                
                // Afficher progressivement le contenu d'upload
                uploadContent.style.display = 'block';
                uploadContent.style.opacity = '0';
                
                setTimeout(() => {
                    uploadContent.style.opacity = '1';
                    // Scroll to upload content
                    uploadContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 50);
            });
            
            // Amélioration du clic sur la zone d'upload
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            // Gestion de la sélection de fichier
            fileInput.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    
                    // Afficher les informations du fichier
                    document.getElementById('fileName').textContent = file.name;
                    fileSize.textContent = formatFileSize(file.size);
                    fileInfo.style.display = 'block';
                    
                    // Afficher et animer la barre de progression
                    progressContainer.style.display = 'block';
                    simulateUploadWithAnimation();
                }
            });
            
            // Amélioration du drag and drop
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                uploadArea.style.borderColor = 'var(--primary)';
                uploadArea.style.backgroundColor = 'rgba(108, 99, 255, 0.1)';
                uploadArea.style.transform = 'scale(1.02)';
            }
            
            function unhighlight() {
                uploadArea.style.borderColor = '#e2e8f0';
                uploadArea.style.backgroundColor = 'var(--light)';
                uploadArea.style.transform = 'scale(1)';
            }
            
            uploadArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    const file = files[0];
                    
                    // Afficher les informations du fichier
                    document.getElementById('fileName').textContent = file.name;
                    fileSize.textContent = formatFileSize(file.size);
                    fileInfo.style.display = 'block';
                    
                    // Afficher et animer la barre de progression
                    progressContainer.style.display = 'block';
                    simulateUploadWithAnimation();
                }
            }
            
            // Format du poids du fichier
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' bytes';
                else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
                else return (bytes / 1048576).toFixed(1) + ' MB';
            }
            
            // Simulation du processus d'upload
            function simulateUploadWithAnimation() {
                let progress = 0;
                const interval = setInterval(() => {
                    // Accélération progressive
                    if (progress < 30) {
                        progress += 2;
                    } else if (progress < 60) {
                        progress += 1.5;
                    } else if (progress < 85) {
                        progress += 1;
                    } else {
                        progress += 0.5;
                    }
                    
                    progressFill.style.width = progress + '%';
                    progressText.textContent = Math.floor(progress) + '%';
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        // Passer à l'étape 2 dans le stepper
                        steps[0].classList.remove('active');
                        steps[0].classList.add('completed');
                        steps[0].querySelector('.step-circle').innerHTML = '<i class="fas fa-check"></i>';
                        steps[1].classList.add('active');
                        
                        setTimeout(() => {
                            // Cacher la progression et afficher les résultats d'analyse
                            progressContainer.style.display = 'none';
                            
                            // Afficher les résultats d'analyse
                            parsingContainer.style.display = 'block';
                            
                            // Animer chaque section
                            const sections = document.querySelectorAll('.parsed-section');
                            sections.forEach((section, index) => {
                                section.style.opacity = '0';
                                section.style.transform = 'translateX(20px)';
                                setTimeout(() => {
                                    section.style.opacity = '1';
                                    section.style.transform = 'translateX(0)';
                                }, 200 * index);
                            });
                            
                            // Scroll vers les résultats d'analyse
                            setTimeout(() => {
                                parsingContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            }, 300);
                        }, 500);
                    }
                }, 50);
            }
            
            // Bouton pour continuer vers la page de questionnaire
            continueBtn.addEventListener('click', function() {
                // Animation de l'étape 3 avant de rediriger
                steps[1].classList.remove('active');
                steps[1].classList.add('completed');
                steps[1].querySelector('.step-circle').innerHTML = '<i class="fas fa-check"></i>';
                steps[2].classList.add('active');
                
                setTimeout(() => {
                    window.location.href = 'candidate-questionnaire.html';
                }, 800);
            });
        });
    </script>
</body>
</html>
