<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sélection des offres - Nexten</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="header.js"></script>
    <script src="footer.js"></script>
    <style>
        /* Styles spécifiques à la page de sélection d'emploi */
        .selection-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .intro-section {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .intro-section h1 {
            color: var(--dark);
            font-size: 2.2rem;
            margin-bottom: 1rem;
        }
        
        .intro-section p {
            color: var(--text);
            max-width: 800px;
            margin: 0 auto 1.5rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .progress-container {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
        }
        
        .progress-steps {
            display: flex;
            align-items: center;
            position: relative;
            max-width: 800px;
        }
        
        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 3px;
            width: 100%;
            background-color: #e2e8f0;
            z-index: 0;
        }
        
        .progress-line {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 3px;
            width: 75%;
            background-color: var(--primary);
            z-index: 1;
            transition: width 0.5s ease;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            padding: 0 2rem;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            border: 3px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.8rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .step-text {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text);
            text-align: center;
        }
        
        .step.completed .step-circle {
            background-color: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .step.active .step-circle {
            border-color: var(--primary);
            color: var(--primary);
            transform: scale(1.1);
            box-shadow: 0 0 0 5px rgba(108, 99, 255, 0.2);
        }
        
        .step.completed .step-text,
        .step.active .step-text {
            color: var(--primary);
            font-weight: 600;
        }

        /* Section profil du candidat */
        .profile-section {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .profile-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 600;
            margin-right: 1.5rem;
            flex-shrink: 0;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .profile-title {
            font-size: 1.2rem;
            color: var(--text);
            margin-bottom: 1rem;
        }

        .profile-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            color: var(--text);
            font-size: 0.95rem;
        }

        .meta-item i {
            color: var(--primary);
            margin-right: 0.5rem;
        }

        .profile-skills {
            margin-top: 1.5rem;
        }

        .profile-skills h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
        }

        .skill-tag {
            background-color: rgba(108, 99, 255, 0.1);
            color: var(--primary);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Compteur de sélection */
        .selection-counter {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
        }

        .counter-text {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .counter {
            background-color: white;
            color: var(--primary);
            border-radius: 20px;
            padding: 0.3rem 1rem;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: var(--shadow-sm);
        }

        /* Section des offres d'emploi */
        .jobs-section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .job-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .filter-select {
            padding: 0.6rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: var(--radius);
            min-width: 180px;
            font-size: 0.95rem;
        }

        .jobs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .job-card {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid transparent;
        }

        .job-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .job-card.selected {
            border-color: var(--primary);
            background-color: rgba(108, 99, 255, 0.05);
        }

        .match-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: var(--dark);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 2;
        }

        .match-badge.high {
            background-color: #10b981;
        }

        .match-badge.medium {
            background-color: #f59e0b;
        }
        
        .job-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            position: relative;
        }

        .company-logo {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .job-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .company-name {
            font-size: 1rem;
            color: var(--text);
            margin-bottom: 0.8rem;
        }

        .job-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .job-tag {
            background-color: var(--light);
            color: var(--text);
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
        }

        .job-tag i {
            margin-right: 0.3rem;
            font-size: 0.8rem;
        }

        .job-body {
            padding: 1.5rem;
        }

        .job-desc {
            color: var(--text);
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 1.2rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .job-skills {
            margin-bottom: 1.2rem;
        }

        .job-skills .section-subtitle {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.8rem;
        }

        .job-skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .job-skill-tag {
            background-color: var(--light);
            color: var(--text);
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .job-skill-tag.match {
            background-color: rgba(16, 185, 129, 0.1);
            color: #10b981;
            font-weight: 500;
        }

        .job-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .job-salary {
            font-weight: 600;
            color: var(--dark);
        }

        .select-btn {
            background-color: white;
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .select-btn:hover {
            background-color: rgba(108, 99, 255, 0.1);
        }

        .select-btn.selected {
            background-color: var(--primary);
            color: white;
        }

        .load-more {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }

        .load-more-btn {
            background-color: white;
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 0.7rem 1.5rem;
            border-radius: 30px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .load-more-btn:hover {
            background-color: rgba(108, 99, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Section de finalisation */
        .finalize-section {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            padding: 2rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .finalize-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .finalize-desc {
            color: var(--text);
            max-width: 700px;
            margin: 0 auto 1.5rem;
            font-size: 1rem;
            line-height: 1.6;
        }

        .submit-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 30px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.7rem;
            box-shadow: var(--shadow-md);
        }

        .submit-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .submit-btn:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .progress-steps {
                width: 100%;
            }
            
            .step {
                padding: 0 1rem;
            }
            
            .step-text {
                font-size: 0.8rem;
            }
            
            .profile-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            
            .profile-avatar {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .profile-meta {
                justify-content: center;
            }
            
            .jobs-grid {
                grid-template-columns: 1fr;
            }
            
            .job-filters {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header></header>

    <main>
        <div class="selection-container">
            <div class="intro-section">
                <h1>Sélectionnez les offres qui vous intéressent</h1>
                <p>Notre algorithme a analysé votre profil et votre questionnaire pour vous proposer les meilleures correspondances. Sélectionnez jusqu'à 10 offres qui vous intéressent pour être mis en relation avec les recruteurs.</p>
            </div>

            <div class="progress-container">
                <div class="progress-steps">
                    <div class="progress-line"></div>
                    <div class="step completed">
                        <div class="step-circle"><i class="fas fa-check"></i></div>
                        <div class="step-text">Upload CV</div>
                    </div>
                    <div class="step completed">
                        <div class="step-circle"><i class="fas fa-check"></i></div>
                        <div class="step-text">Questionnaire</div>
                    </div>
                    <div class="step active">
                        <div class="step-circle">3</div>
                        <div class="step-text">Sélection d'offres</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">4</div>
                        <div class="step-text">Matching</div>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar">
                        JD
                    </div>
                    <div class="profile-info">
                        <h2 class="profile-name">Jean Dupont</h2>
                        <p class="profile-title">Développeur Frontend Senior</p>
                        <div class="profile-meta">
                            <div class="meta-item">
                                <i class="fas fa-briefcase"></i>
                                <span>5 ans d'expérience</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Paris, France</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-calendar-check"></i>
                                <span>Disponible dans 2 mois</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-euro-sign"></i>
                                <span>55-65K€</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="profile-skills">
                    <h3>Compétences principales</h3>
                    <div class="skills-container">
                        <span class="skill-tag">JavaScript</span>
                        <span class="skill-tag">React</span>
                        <span class="skill-tag">TypeScript</span>
                        <span class="skill-tag">Node.js</span>
                        <span class="skill-tag">HTML/CSS</span>
                        <span class="skill-tag">Next.js</span>
                        <span class="skill-tag">GraphQL</span>
                        <span class="skill-tag">Git</span>
                    </div>
                </div>
            </div>

            <div class="selection-counter">
                <div class="counter-text">Offres sélectionnées</div>
                <div class="counter" id="selection-count">0/10</div>
            </div>

            <div class="jobs-section">
                <div class="section-header">
                    <h2 class="section-title">Offres recommandées</h2>
                </div>

                <div class="job-filters">
                    <select class="filter-select" id="sort-filter">
                        <option value="match">Trier par correspondance</option>
                        <option value="salary">Trier par salaire</option>
                        <option value="recent">Trier par date</option>
                    </select>
                    <select class="filter-select" id="contract-filter">
                        <option value="all">Tous les contrats</option>
                        <option value="cdi">CDI</option>
                        <option value="cdd">CDD</option>
                        <option value="freelance">Freelance</option>
                    </select>
                    <select class="filter-select" id="location-filter">
                        <option value="all">Toutes les localisations</option>
                        <option value="paris">Paris</option>
                        <option value="lyon">Lyon</option>
                        <option value="remote">Télétravail</option>
                    </select>
                </div>

                <div class="jobs-grid" id="jobs-container">
                    <!-- Les offres d'emploi seront générées dynamiquement -->
                </div>

                <div class="load-more">
                    <button class="load-more-btn" id="load-more-btn">
                        <i class="fas fa-sync-alt"></i>
                        Afficher plus d'offres
                    </button>
                </div>
            </div>

            <div class="finalize-section">
                <h2 class="finalize-title">Prêt à rencontrer vos futurs employeurs ?</h2>
                <p class="finalize-desc">Vous avez sélectionné <span id="selected-count">0</span> offres qui correspondent à votre profil. Validez votre sélection pour être mis en relation avec les recruteurs intéressés.</p>
                <button class="submit-btn" id="submit-btn" disabled>
                    <i class="fas fa-check-circle"></i>
                    Valider ma sélection
                </button>
            </div>
        </div>
    </main>

    <footer></footer>

    <script>
        // Données de l'utilisateur (simulées, à remplacer par les données réelles)
        let userData = {
            name: "Jean Dupont",
            initials: "JD",
            title: "Développeur Frontend Senior",
            experience: "5 ans d'expérience",
            location: "Paris, France",
            availability: "Disponible dans 2 mois",
            salary: "55-65K€",
            skills: ["JavaScript", "React", "TypeScript", "Node.js", "HTML/CSS", "Next.js", "GraphQL", "Git"]
        };
        
        // Récupérer les données du candidat depuis localStorage si disponibles
        const candidateDataString = localStorage.getItem('candidateData');
        if (candidateDataString) {
            try {
                const candidateData = JSON.parse(candidateDataString);
                console.log("Données candidat récupérées:", candidateData);
                
                // Mettre à jour les données utilisateur avec les informations du candidat
                if (candidateData.personalInfo) {
                    userData.name = candidateData.personalInfo.name || userData.name;
                    userData.title = candidateData.personalInfo.jobTitle || userData.title;
                    
                    // Générer les initiales
                    const nameParts = userData.name.split(' ');
                    if (nameParts.length >= 2) {
                        userData.initials = nameParts[0].charAt(0) + nameParts[1].charAt(0);
                    } else if (nameParts.length === 1) {
                        userData.initials = nameParts[0].charAt(0);
                    }
                }
                
                if (candidateData.professionalPreferences) {
                    userData.location = candidateData.professionalPreferences.location || userData.location;
                    userData.salary = candidateData.professionalPreferences.salary || userData.salary;
                    userData.availability = candidateData.professionalPreferences.availability || userData.availability;
                }
                
                if (candidateData.skills && candidateData.skills.technical) {
                    userData.skills = candidateData.skills.technical.slice(0, 8);
                }
                
                // Mettre à jour l'interface utilisateur avec les données récupérées
                updateUserInterface();
                
            } catch (error) {
                console.error("Erreur lors de la récupération des données candidat:", error);
            }
        }
        
        // Mettre à jour l'interface utilisateur avec les données
        function updateUserInterface() {
            document.querySelector('.profile-avatar').textContent = userData.initials;
            document.querySelector('.profile-name').textContent = userData.name;
            document.querySelector('.profile-title').textContent = userData.title;
            
            // Mettre à jour les méta-informations
            const metaItems = document.querySelectorAll('.meta-item span');
            metaItems[0].textContent = userData.experience;
            metaItems[1].textContent = userData.location;
            metaItems[2].textContent = userData.availability;
            metaItems[3].textContent = userData.salary;
            
            // Mettre à jour les compétences
            const skillsContainer = document.querySelector('.skills-container');
            skillsContainer.innerHTML = '';
            
            userData.skills.forEach(skill => {
                const skillTag = document.createElement('span');
                skillTag.className = 'skill-tag';
                skillTag.textContent = skill;
                skillsContainer.appendChild(skillTag);
            });
        }
        
        // Données des offres d'emploi (simulées, à remplacer par les données réelles)
        const jobsData = [
            {
                id: 1,
                title: "Développeur Frontend React",
                company: "TechSolutions",
                companyInitial: "T",
                location: "Paris",
                contract: "CDI",
                remote: "Hybride",
                salary: "55-65K€",
                matchScore: 95,
                description: "Nous recherchons un développeur Frontend expérimenté pour rejoindre notre équipe produit. Vous travaillerez sur des applications React modernes et participerez à l'amélioration de notre plateforme SaaS.",
                skills: ["JavaScript", "React", "TypeScript", "HTML/CSS", "Redux", "Git"],
                date: "2023-02-20"
            },
            {
                id: 2,
                title: "Lead Developer Frontend",
                company: "InnovateTech",
                companyInitial: "I",
                location: "Paris",
                contract: "CDI",
                remote: "100% Télétravail",
                salary: "65-75K€",
                matchScore: 92,
                description: "En tant que Lead Developer Frontend, vous superviserez une équipe de développeurs et guiderez les décisions techniques. Vous serez responsable de l'architecture frontend et de la mise en œuvre des meilleures pratiques.",
                skills: ["JavaScript", "React", "TypeScript", "Node.js", "Architecture", "Leadership"],
                date: "2023-02-15"
            },
            {
                id: 3,
                title: "Développeur Full Stack",
                company: "DataSystems",
                companyInitial: "D",
                location: "Lyon",
                contract: "CDI",
                remote: "Hybride",
                salary: "60-70K€",
                matchScore: 85,
                description: "Rejoignez notre équipe en tant que développeur Full Stack pour travailler sur notre plateforme d'analyse de données. Vous développerez des interfaces utilisateur modernes et des API performantes.",
                skills: ["JavaScript", "React", "Node.js", "Express", "MongoDB", "REST API"],
                date: "2023-02-10"
            },
            {
                id: 4,
                title: "Développeur Frontend React Native",
                company: "MobileFirst",
                companyInitial: "M",
                location: "Paris",
                contract: "CDI",
                remote: "Sur site",
                salary: "50-60K€",
                matchScore: 82,
                description: "Nous recherchons un développeur React Native pour créer des applications mobiles cross-platform. Vous serez impliqué dans toutes les étapes du développement d'applications mobiles, de la conception à la publication.",
                skills: ["JavaScript", "React Native", "Mobile", "Redux", "API Integration", "Git"],
                date: "2023-02-05"
            },
            {
                id: 5,
                title: "Ingénieur Frontend",
                company: "TechGlobal",
                companyInitial: "T",
                location: "Lyon",
                contract: "CDI",
                remote: "100% Télétravail",
                salary: "55-65K€",
                matchScore: 80,
                description: "Rejoignez notre équipe d'ingénieurs Frontend pour travailler sur des projets innovants. Vous participerez au développement de nouvelles fonctionnalités et à l'amélioration de l'expérience utilisateur.",
                skills: ["JavaScript", "Vue.js", "HTML/CSS", "WebPack", "Sass", "Jest"],
                date: "2023-02-01"
            },
            {
                id: 6,
                title: "Développeur Frontend Angular",
                company: "ConsultingTech",
                companyInitial: "C",
                location: "Paris",
                contract: "Freelance",
                remote: "100% Télétravail",
                salary: "500-600€/jour",
                matchScore: 78,
                description: "Nous recherchons un développeur Angular expérimenté pour un projet de refonte d'application web. Vous travaillerez en étroite collaboration avec l'équipe produit pour livrer une interface utilisateur moderne et performante.",
                skills: ["Angular", "TypeScript", "RxJS", "HTML/CSS", "Material Design", "Git"],
                date: "2023-01-25"
            },
            {
                id: 7,
                title: "Développeur Frontend Junior",
                company: "StartupInnovate",
                companyInitial: "S",
                location: "Paris",
                contract: "CDD",
                remote: "Hybride",
                salary: "40-45K€",
                matchScore: 75,
                description: "Startup en croissance recherche un développeur Frontend motivé pour rejoindre notre équipe. Vous participerez au développement de notre plateforme web et travaillerez sur des fonctionnalités innovantes.",
                skills: ["JavaScript", "React", "HTML/CSS", "Git", "Responsive Design"],
                date: "2023-01-20"
            },
            {
                id: 8,
                title: "Développeur Web Frontend",
                company: "AgenceDigitale",
                companyInitial: "A",
                location: "Lyon",
                contract: "CDI",
                remote: "Sur site",
                salary: "45-55K€",
                matchScore: 72,
                description: "Agence digitale recherche un développeur frontend pour travailler sur divers projets web. Vous intégrerez des maquettes graphiques et développerez des sites web modernes et responsives.",
                skills: ["JavaScript", "HTML/CSS", "Responsive", "WordPress", "jQuery", "PHP"],
                date: "2023-01-15"
            },
            {
                id: 9,
                title: "Développeur Frontend eCommerce",
                company: "ShopOnline",
                companyInitial: "S",
                location: "Paris",
                contract: "CDI",
                remote: "Hybride",
                salary: "50-60K€",
                matchScore: 70,
                description: "Rejoignez notre équipe eCommerce pour développer et améliorer notre plateforme de vente en ligne. Vous serez responsable de l'implémentation d'interfaces utilisateur et de l'optimisation des conversions.",
                skills: ["JavaScript", "React", "HTML/CSS", "Shopify", "Prestashop", "SEO"],
                date: "2023-01-10"
            },
            {
                id: 10,
                title: "Développeur Fullstack JavaScript",
                company: "WebSolutions",
                companyInitial: "W",
                location: "Remote",
                contract: "Freelance",
                remote: "100% Télétravail",
                salary: "450-550€/jour",
                matchScore: 68,
                description: "Nous recherchons un développeur Fullstack JavaScript pour renforcer notre équipe. Vous travaillerez sur des projets variés et serez impliqué dans toutes les phases du développement, du frontend au backend.",
                skills: ["JavaScript", "Node.js", "React", "MongoDB", "Express", "API REST"],
                date: "2023-01-05"
            }
        ];
        
        // Initialiser le compteur de sélection et l'ensemble des offres sélectionnées
        let selectedJobs = new Set();
        let displayedJobs = 6; // Nombre d'offres affichées initialement
        
        // Générer les cartes d'offres d'emploi
        function generateJobCards(jobs) {
            const jobsContainer = document.getElementById('jobs-container');
            jobsContainer.innerHTML = '';
            
            jobs.slice(0, displayedJobs).forEach(job => {
                const isSelected = selectedJobs.has(job.id);
                const cardClass = isSelected ? 'job-card selected' : 'job-card';
                const buttonClass = isSelected ? 'select-btn selected' : 'select-btn';
                const buttonText = isSelected ? '<i class="fas fa-check"></i> Sélectionnée' : '<i class="fas fa-plus"></i> Sélectionner';
                
                let matchBadgeClass = 'match-badge';
                if (job.matchScore >= 90) {
                    matchBadgeClass += ' high';
                } else if (job.matchScore >= 80) {
                    matchBadgeClass += ' medium';
                }
                
                const jobSkills = job.skills.map(skill => {
                    const isMatch = userData.skills.includes(skill);
                    return `<span class="job-skill-tag${isMatch ? ' match' : ''}">${skill}</span>`;
                }).join('');
                
                const jobCard = `
                    <div class="${cardClass}" data-id="${job.id}">
                        <div class="${matchBadgeClass}">${job.matchScore}% match</div>
                        <div class="job-header">
                            <div class="company-logo">${job.companyInitial}</div>
                            <h3 class="job-title">${job.title}</h3>
                            <p class="company-name">${job.company}</p>
                            <div class="job-tags">
                                <span class="job-tag"><i class="fas fa-map-marker-alt"></i> ${job.location}</span>
                                <span class="job-tag"><i class="fas fa-file-contract"></i> ${job.contract}</span>
                                <span class="job-tag"><i class="fas fa-home"></i> ${job.remote}</span>
                            </div>
                        </div>
                        <div class="job-body">
                            <p class="job-desc">${job.description}</p>
                            <div class="job-skills">
                                <p class="section-subtitle">Compétences requises</p>
                                <div class="job-skill-tags">
                                    ${jobSkills}
                                </div>
                            </div>
                        </div>
                        <div class="job-footer">
                            <div class="job-salary">${job.salary}</div>
                            <button class="${buttonClass}" data-id="${job.id}">${buttonText}</button>
                        </div>
                    </div>
                `;
                
                jobsContainer.innerHTML += jobCard;
            });
            
            // Ajouter les écouteurs d'événements pour les boutons de sélection
            document.querySelectorAll('.select-btn').forEach(button => {
                button.addEventListener('click', toggleJobSelection);
            });
        }
        
        // Fonction pour basculer la sélection d'une offre
        function toggleJobSelection() {
            const jobId = parseInt(this.getAttribute('data-id'));
            const jobCard = document.querySelector(`.job-card[data-id="${jobId}"]`);
            
            if (selectedJobs.has(jobId)) {
                // Désélectionner l'offre
                selectedJobs.delete(jobId);
                jobCard.classList.remove('selected');
                this.classList.remove('selected');
                this.innerHTML = '<i class="fas fa-plus"></i> Sélectionner';
            } else {
                // Vérifier si le maximum de sélections est atteint
                if (selectedJobs.size >= 10) {
                    alert('Vous avez déjà sélectionné 10 offres, le maximum autorisé. Veuillez en désélectionner une avant d\'en ajouter une nouvelle.');
                    return;
                }
                
                // Sélectionner l'offre
                selectedJobs.add(jobId);
                jobCard.classList.add('selected');
                this.classList.add('selected');
                this.innerHTML = '<i class="fas fa-check"></i> Sélectionnée';
            }
            
            // Mettre à jour les compteurs
            updateSelectionCounters();
            
            // Activer/désactiver le bouton de soumission
            document.getElementById('submit-btn').disabled = selectedJobs.size === 0;
        }
        
        // Mettre à jour les compteurs de sélection
        function updateSelectionCounters() {
            document.getElementById('selection-count').textContent = `${selectedJobs.size}/10`;
            document.getElementById('selected-count').textContent = selectedJobs.size;
        }
        
        // Gérer le bouton "Afficher plus"
        document.getElementById('load-more-btn').addEventListener('click', function() {
            // Augmenter le nombre d'offres affichées
            displayedJobs = Math.min(displayedJobs + 4, jobsData.length);
            
            // Regénérer les cartes d'offres
            generateJobCards(getSortedAndFilteredJobs());
            
            // Masquer le bouton si toutes les offres sont affichées
            if (displayedJobs >= jobsData.length) {
                this.style.display = 'none';
            }
        });
        
        // Gérer les filtres et le tri
        document.getElementById('sort-filter').addEventListener('change', applyFiltersAndSort);
        document.getElementById('contract-filter').addEventListener('change', applyFiltersAndSort);
        document.getElementById('location-filter').addEventListener('change', applyFiltersAndSort);
        
        function applyFiltersAndSort() {
            // Réinitialiser le nombre d'offres affichées
            displayedJobs = 6;
            
            // Afficher les offres filtrées et triées
            generateJobCards(getSortedAndFilteredJobs());
            
            // Afficher le bouton "Afficher plus" s'il reste des offres à afficher
            const loadMoreBtn = document.getElementById('load-more-btn');
            loadMoreBtn.style.display = jobsData.length > displayedJobs ? 'flex' : 'none';
        }
        
        function getSortedAndFilteredJobs() {
            // Récupérer les valeurs des filtres
            const sortValue = document.getElementById('sort-filter').value;
            const contractValue = document.getElementById('contract-filter').value;
            const locationValue = document.getElementById('location-filter').value;
            
            // Filtrer les offres
            let filteredJobs = [...jobsData];
            
            if (contractValue !== 'all') {
                filteredJobs = filteredJobs.filter(job => {
                    if (contractValue === 'cdi') return job.contract === 'CDI';
                    if (contractValue === 'cdd') return job.contract === 'CDD';
                    if (contractValue === 'freelance') return job.contract === 'Freelance';
                    return true;
                });
            }
            
            if (locationValue !== 'all') {
                filteredJobs = filteredJobs.filter(job => {
                    if (locationValue === 'paris') return job.location.includes('Paris');
                    if (locationValue === 'lyon') return job.location.includes('Lyon');
                    if (locationValue === 'remote') return job.remote.includes('Télétravail');
                    return true;
                });
            }
            
            // Trier les offres
            filteredJobs.sort((a, b) => {
                if (sortValue === 'match') return b.matchScore - a.matchScore;
                if (sortValue === 'salary') {
                    // Extraire les valeurs numériques des salaires pour trier
                    const getSalaryValue = (salary) => {
                        const match = salary.match(/(\d+)/g);
                        return match ? parseInt(match[match.length > 1 ? 1 : 0]) : 0;
                    };
                    return getSalaryValue(b.salary) - getSalaryValue(a.salary);
                }
                if (sortValue === 'recent') {
                    return new Date(b.date) - new Date(a.date);
                }
                return 0;
            });
            
            return filteredJobs;
        }
        
        // Gérer le bouton de soumission
        document.getElementById('submit-btn').addEventListener('click', function() {
            if (selectedJobs.size === 0) {
                alert('Veuillez sélectionner au moins une offre avant de valider.');
                return;
            }
            
            // Récupérer les offres sélectionnées
            const selectedJobsArray = Array.from(selectedJobs).map(id => {
                return jobsData.find(job => job.id === id);
            });
            
            // Sauvegarder les offres sélectionnées dans localStorage
            localStorage.setItem('selectedJobs', JSON.stringify(selectedJobsArray));
            
            // Rediriger vers la page de matching
            window.location.href = 'candidate-matches.html';
        });
        
        // Afficher les offres au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            // Mettre à jour l'interface utilisateur avec les données de l'utilisateur
            updateUserInterface();
            
            // Générer les cartes d'offres d'emploi
            generateJobCards(jobsData);
            
            // Initialiser les compteurs de sélection
            updateSelectionCounters();
            
            // Désactiver le bouton de soumission au départ
            document.getElementById('submit-btn').disabled = true;
            
            // Afficher le bouton "Afficher plus" s'il reste des offres à afficher
            document.getElementById('load-more-btn').style.display = jobsData.length > displayedJobs ? 'flex' : 'none';
        });
    </script>
</body>
</html>